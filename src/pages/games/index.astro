---
import ActionDelete from "@components/ActionDelete.astro";
import ActionEdit from "@components/ActionEdit.astro";
import DataTableItem from "@components/DataTableItem.astro";
import DataTableTitle from "@components/DataTableTitle.astro";
import { getAllGames } from "@data/games";
import AppLayout from "@layouts/AppLayout.astro";
import DataTable from "@layouts/DataTable.astro";

const games = await getAllGames();
---

<AppLayout title="Cardio | Games">
  <DataTable
    title="Game collection"
    cta="Create game"
    ctaLink="/games/create"
    description="The games you played."
  >
    <div slot="thead">
      <DataTableTitle>Game name</DataTableTitle>
      <DataTableTitle class="text-right">Actions</DataTableTitle>
    </div>
    <div slot="tbody">
      {
        games.map((game) => (
          <tr>
            <DataTableItem>{game.name}</DataTableItem>
            <DataTableItem>
              <div class="flex justify-end gap-4">
                <ActionEdit href={`/games/${game.id}/edit`} />
                <ActionDelete href={`/games/${game.id}/delete`} />
              </div>
            </DataTableItem>
          </tr>
        ))
      }
    </div>
  </DataTable>
</AppLayout>
